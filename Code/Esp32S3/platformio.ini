; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[env:esp32s3_devkit]
framework = arduino
platform = https://github.com/pioarduino/platform-espressif32/releases/download/stable/platform-espressif32.zip
platform_packages =
    framework-arduinoespressif32 @ https://github.com/espressif/arduino-esp32.git#3.3.0
board_build.f_cpu = 240000000L
upload_protocol = esptool
board = esp32-s3-devkitc-1 ; Use a generic S3 dev kit ID, adjust if you have a specific board name
monitor_speed = 115200
lib_deps =
    ; WiFi, HardwareSerial are included with the framework
    bblanchon/ArduinoJson @ ^6.19.4     ; Specific version for JSON handling (adjust if needed)
    4-20ma/ModbusMaster @ ^2.0.1      ; Modbus library (adjust if using a different one)
    https://github.com/me-no-dev/ESPAsyncWebServer.git ; Using GitHub URL
    ; esphome/AsyncTCP @ ^1.1.1          ; <-- Original identifier causing error
    https://github.com/me-no-dev/AsyncTCP.git ; Using GitHub URL instead (dependency for ESPAsyncWebServer)

; Optional: Uncomment and set your upload port if PlatformIO doesn't find it automatically
; upload_port = COMx  ; Windows
; upload_port = /dev/ttyUSBx ; Linux

; Optional: Uncomment to handle the mbedtls error if updating libraries doesn't work
; build_flags = -DASYNCWEBSERVER_REGEX

; Optional: Increase partition size if needed for web server files/code size
; board_build.partitions = huge_app.csv

